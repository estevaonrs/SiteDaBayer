<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Como Funciona - Parceria Premiada</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="main-header">
        <nav class="navbar">
            <a href="index.html" class="navbar-logo">
                <img src="assets/images/common/logo.svg" alt="Logo Parceria Premiada">
            </a>
            <div class="navbar-links">
                <img src="assets/images/common/nav-separator.svg" alt="Separador" class="nav-separator">
                <a href="index.html">Início</a>
                <img src="assets/images/common/nav-separator.svg" alt="Separador" class="nav-separator">
                <a href="como-funciona.html">Como Funciona</a>
                <img src="assets/images/common/nav-separator.svg" alt="Separador" class="nav-separator">
                <a href="faq.html">FAQ</a>
                <img src="assets/images/common/nav-separator.svg" alt="Separador" class="nav-separator">
                <a href="login.html">Login</a>
            </div>
        </nav>
    </header>

    <main>
        <section id="ctv-intro-section">
            <div class="ctv-intro-title-group">
                <h1 class="ctv-intro-title">Como funciona CTV</h1>
                <img class="ctv-intro-lines" src="assets/images/how-it-works/title-lines.svg" alt="Linhas decorativas">
            </div>
            <div class="ctv-intro-content">
                <h2 class="ctv-intro-headline">Aqui você só ganha!</h2>
                <p class="ctv-intro-description">
                    Você vende, participa e ganha, nós fazemos o resto. Toda Safra o ciclo se repete, você se cadastra apenas uma vez.
                </p>
            </div>
            <img class="ctv-intro-illustration" src="assets/images/how-it-works/ctv-illustration.svg" alt="Ilustração de como o programa funciona para CTVs">
        </section>

        <section id="ctv-steps-section">
            <div class="ctv-steps-scroll-track">
                <div class="ctv-steps-sticky-container">
                    
                    <div class="timeline-wrapper">
                            <div class="timeline-line"></div>
                            <div class="timeline-line-progress"></div>
                        
                        <div class="timeline-step">
                            <p class="timeline-text-top">Lançamos as campanhas da safra na plataforma.</p>
                            <div class="timeline-icon-container">
                                <img class="timeline-icon" src="assets/images/how-it-works/icon-1.svg" alt="">
                            </div>
                            <p class="timeline-text-bottom">Início da Safra</p>
                        </div>
                        <div class="timeline-step">
                            <p class="timeline-text-top">Você aceita as campanhas e aponta as notas das suas vendas.</p>
                            <div class="timeline-icon-container">
                                <img class="timeline-icon" src="assets/images/how-it-works/icon-2.svg" alt="">
                            </div>
                            <p class="timeline-text-bottom placeholder">.</p> </div>
                        <div class="timeline-step">
                            <p class="timeline-text-top">O Master avalia as notas apontadas e faz o acompanhamento.</p>
                            <div class="timeline-icon-container">
                                <img class="timeline-icon" src="assets/images/how-it-works/icon-3.svg" alt="">
                            </div>
                            <p class="timeline-text-bottom placeholder">.</p> </div>
                        <div class="timeline-step">
                            <p class="timeline-text-top">Você acompanha o seu dinheiro ao longo da safra.</p>
                            <div class="timeline-icon-container">
                                <img class="timeline-icon" src="assets/images/how-it-works/icon-4.svg" alt="">
                            </div>
                            <p class="timeline-text-bottom placeholder">.</p> </div>
                        <div class="timeline-step">
                            <p class="timeline-text-top">Ao final da safra e após apuração você terá o seu benefício liberado.</p>
                            <div class="timeline-icon-container">
                                <img class="timeline-icon" src="assets/images/how-it-works/icon-5.svg" alt="">
                            </div>
                            <p class="timeline-text-bottom placeholder">.</p> </div>
                        <div class="timeline-step">
                            <p class="timeline-text-top">Prêmio disponível para resgate</p>
                            <div class="timeline-icon-container">
                                <img class="timeline-icon" src="assets/images/how-it-works/icon-6.svg" alt="">
                            </div>
                            <p class="timeline-text-bottom">Final da Safra</p>
                        </div>
                    </div>
                    
                </div>
            </div>
        </section>

        <section id="ctv-attention-section">
            <img class="attention-frame" src="assets/images/how-it-works/attention-frame.svg" alt="Moldura decorativa">
            <div class="attention-box">
                <img class="attention-icon" src="assets/images/how-it-works/icon-attention.svg" alt="Ícone de Atenção">
                <p class="attention-text">Você tem 6 meses para resgatar seu prêmio!</p>
            </div>
        </section>

        <section id="ctv-learn-section">
            <div class="container">
                <img class="learn-illustration" src="assets/images/how-it-works/learn-illustration.svg" alt="Ilustração de aprendizado">
                <div class="learn-content">
                    <h2 class="learn-headline">Aprenda a usar a plataforma</h2>
                    <img class="learn-decorative-lines" src="assets/images/how-it-works/learn-title-lines.svg" alt="Linhas decorativas">
                    <p class="learn-description">
                        Os vídeos abaixo foram pensados para você, para auxíliá-lo(a) com o uso da plataforma. Não se preocupe, são vídeos curtos e a plataforma é intuitiva.
                        <br><br>
                        <strong>Não perca tempo, entre na Parceria Premiada e ganhe a cada venda!</strong>
                    </p>
                </div>
            </div>
        </section>

        <section id="ctv-videos-section">
            <div class="container">
                <div class="video-card">
                    <a href="#" class="video-thumbnail-wrapper" data-video-source="https://www.youtube.com/watch?v=cBgXL-IO4UQ">
                        <img class="video-thumbnail" src="assets/images/how-it-works/video-thumb-register.svg" alt="Thumbnail do vídeo Como se cadastrar">
                        <img class="video-play-icon" src="assets/images/how-it-works/icon-play.svg" alt="Ícone de Play">
                    </a>
                    <p class="video-title">Como se cadastrar</p>
                </div>

                <div class="video-card video-card--2">
                    <a href="#" class="video-thumbnail-wrapper" data-video-source="">
                        <img class="video-thumbnail" src="assets/images/how-it-works/video-thumb-features.svg" alt="Thumbnail do vídeo Funcionalidades">
                        <img class="video-play-icon" src="assets/images/how-it-works/icon-play.svg" alt="Ícone de Play">
                    </a>
                    <p class="video-title">Funcionalidades</p>
                </div>

                <div class="video-card video-card--3">
                    <a href="#" class="video-thumbnail-wrapper" data-video-source="">
                        <img class="video-thumbnail" src="assets/images/how-it-works/video-thumb-campaigns.svg" alt="Thumbnail do vídeo Campanhas como participar">
                        <img class="video-play-icon" src="assets/images/how-it-works/icon-play.svg" alt="Ícone de Play">
                    </a>
                    <p class="video-title">Campanhas // como participar</p>
                </div>

                <div class="video-card video-card--4">
                    <a href="#" class="video-thumbnail-wrapper" data-video-source="">
                        <img class="video-thumbnail" src="assets/images/how-it-works/video-thumb-invoices.svg" alt="Thumbnail do vídeo Como apontar notas">
                        <img class="video-play-icon" src="assets/images/how-it-works/icon-play.svg" alt="Ícone de Play">
                    </a>
                    <p class="video-title">Como apontar notas</p>
                </div>

                <div class="video-card video-card--5">
                    <a href="#" class="video-thumbnail-wrapper" data-video-source="">
                        <img class="video-thumbnail" src="assets/images/how-it-works/video-thumb-redeem.svg" alt="Thumbnail do vídeo Como resgatar seu prêmio">
                        <img class="video-play-icon" src="assets/images/how-it-works/icon-play.svg" alt="Ícone de Play">
                    </a>
                    <p class="video-title">Como resgatar seu prêmio</p>
                </div>

            </div>
        </section>

        <section id="master-intro-section">
            <h1 class="master-intro-title">Como funciona MASTER</h1>
            <img class="master-intro-lines" src="assets/images/master/title-lines.svg" alt="Linhas decorativas">
            
            <img class="master-intro-illustration" src="assets/images/master/illustration.svg" alt="Ilustração do fluxo Master">

            <div class="master-intro-text-content">
                <p class="master-intro-headline">
                    Simples e intuitivo. O que nós buscamos é facilitar sua rotina.
                </p>
                <p class="master-intro-description">
                    Administrar o dia a dia da Parceria Premiada no seu canal, ficou mais fácil e ágil. Agora você faz tudo em um só lugar.
                    <br><br>
                    Suas responsabilidades?
                </p>
            </div>
        </section>

        <section id="master-steps-section">
            <div class="master-step-item">
                <img class="master-step-icon" src="assets/images/master/step-icon-1.svg" alt="Ícone de Aprovação de Cadastro">
                <div class="master-step-text">
                    <h3>Aprovar</h3>
                    <p>o cadastro dos CTVs do seu canal</p>
                </div>
            </div>
            
            <div class="master-step-item master-step-item--2">
                <img class="master-step-icon" src="assets/images/master/step-icon-2.svg" alt="Ícone de Validação de Notas">
                <div class="master-step-text">
                    <h3>Validar</h3>
                    <p>as Notas Fiscais apontadas no seu Canal</p>
                </div>
            </div>

            <div class="master-step-item master-step-item--3">
                <img class="master-step-icon" src="assets/images/master/step-icon-3.svg" alt="Ícone de Garantia de Participação">
                <div class="master-step-text">
                    <h3>Garantir</h3>
                    <p>que todos os CTVs estão inscritos, participando e ganhando com a Parceria Premiada.</p>
                </div>
            </div>

            <img class="master-steps-lines" src="assets/images/master/decorative-lines-2.svg" alt="Linhas decorativas">
            <img class="master-steps-illustration" src="assets/images/master/illustration-2.svg" alt="Ilustração de aprendizado do Master">

            <div class="master-steps-text-content">
                <h2 class="master-steps-headline">É fácil e prático. Veja os conteúdos que preparamos para você.</h2>
                <p class="master-steps-description">Preparamos alguns vídeos para auxiliá-lo(a) com o uso da plataforma. Não se preocupe, são vídeos curtos e a plataforma é totalmente intuitiva, muito mais fácil do que se imagina, para agilizar sua rotina.</p>
            </div>
        </section>

        <section id="master-videos-section">
            <div class="container">
                <div class="video-card"> <a href="#" class="video-thumbnail-wrapper" data-video-source="https://www.youtube.com/watch?v=cBgXL-IO4UQ">
                        <img class="video-thumbnail" src="assets/images/master/video-thumb-master-register.svg" alt="Thumbnail do vídeo Como se cadastrar (Master)">
                        <img class="video-play-icon" src="assets/images/how-it-works/icon-play.svg" alt="Ícone de Play">
                    </a>
                    <p class="video-title">Como se cadastrar</p>
                </div>

                <div class="video-card video-card--2"> <a href="#" class="video-thumbnail-wrapper" data-video-source="URL_DO_SEU_VIDEO_AQUI_2">
                        <img class="video-thumbnail" src="assets/images/master/video-thumb-master-features.svg" alt="Thumbnail do vídeo Funcionalidades (Master)">
                        <img class="video-play-icon" src="assets/images/how-it-works/icon-play.svg" alt="Ícone de Play">
                    </a>
                    <p class="video-title">Funcionalidades</p>
                </div>

                <div class="video-card video-card--3"> <a href="#" class="video-thumbnail-wrapper" data-video-source="URL_DO_SEU_VIDEO_AQUI_3">
                        <img class="video-thumbnail" src="assets/images/master/video-thumb-master-validate-register.svg" alt="Thumbnail do vídeo Como validar cadastros (Master)">
                        <img class="video-play-icon" src="assets/images/how-it-works/icon-play.svg" alt="Ícone de Play">
                    </a>
                    <p class="video-title">Como validar cadastros</p>
                </div>

                <div class="video-card video-card--4"> <a href="#" class="video-thumbnail-wrapper" data-video-source="URL_DO_SEU_VIDEO_AQUI_4">
                        <img class="video-thumbnail" src="assets/images/master/video-thumb-master-validate-invoices.svg" alt="Thumbnail do vídeo Como validar notas fiscais (Master)">
                        <img class="video-play-icon" src="assets/images/how-it-works/icon-play.svg" alt="Ícone de Play">
                    </a>
                    <p class="video-title">Como validar notas fiscais</p>
                </div>
            </div>
        </section>

        <footer id="site-footer">
            <div class="footer-top">
                <div class="footer-text-content">
                    <h2>Baixe o app.</h2>
                    <p>Ative as notificações. Pelo App nossa troca é mais dinâmica e segura, baixe-o e fique atento(a) aos nossos comunicados. Assim, o sucesso da nossa Parceria Premiada é ainda maior.</p>
                </div>
                <div class="footer-app-stores">
                    <a href="#" class="app-store-link">
                        <img src="assets/images/footer/google-play-badge.svg" alt="Baixar na Google Play Store">
                    </a>
                    <a href="#" class="app-store-link">
                        <img src="assets/images/footer/apple-app-store-badge.svg" alt="Baixar na Apple App Store">
                    </a>
                </div>
            </div>
            <div class="footer-middle">
                <img src="assets/images/footer/decorative-stripe.svg" alt="Listra decorativa" class="footer-stripe">
                <p class="footer-subtitle">Impulsionando o seu negócio para o futuro!</p>
                <img src="assets/images/footer/bayer-logo.svg" alt="Logo da Bayer" class="footer-bayer-logo">
            </div>
            <div class="footer-bottom">
                <div class="footer-contact">
                    <img src="assets/images/footer/converse-bayer-logo.svg" alt="Converse Bayer" class="contact-logo">
                    <p class="contact-phone">0800 011 5560 *</p>
                    <p class="contact-disclaimer">* Central de atendimento: Segunda a Sábado | 7h - 19h (exceto feriados). Em caso de emergência, nosso atendimento ocorre 24 horas, todos os dias da semana.</p>
                </div>
                <div class="footer-social">
                    <h3>Nossos canais:</h3>
                    <div class="social-icons-list">
                        <a href="#"><img src="assets/images/footer/icon-web.svg" alt="Website"></a>
                        <a href="#"><img src="assets/images/footer/icon-facebook.svg" alt="Facebook"></a>
                        <a href="#"><img src="assets/images/footer/icon-instagram.svg" alt="Instagram"></a>
                        <a href="#"><img src="assets/images/footer/icon-youtube.svg" alt="YouTube"></a>
                    </div>
                </div>
            </div>
        </footer>
    </main>

    <a href="#" class="back-to-top-button">
        <img src="assets/images/common/back-to-top.svg" alt="Voltar ao topo">
    </a>

    <div id="video-popup" class="video-popup-overlay">
        <div class="video-popup-content">
            <button class="video-popup-close-button">
                <img src="assets/images/common/icon-close.svg" alt="Fechar vídeo"> 
            </button>
            <div id="video-popup-player-container">
            </div>
        </div>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Script da Timeline ---
        const track = document.querySelector('.ctv-steps-scroll-track');
        const stickyContainer = document.querySelector('.ctv-steps-sticky-container');
        const timeline = document.querySelector('.timeline-wrapper');
        const progressLine = document.querySelector('.timeline-line-progress');

        if (track && stickyContainer && timeline && progressLine) {
            function handleScroll() {
                const trackRect = track.getBoundingClientRect();
                const timelineWidth = timeline.scrollWidth;
                const containerWidth = stickyContainer.clientWidth;
                const maxMove = Math.max(0, timelineWidth - containerWidth);
                const totalScroll = track.scrollHeight - window.innerHeight;
                const scrollPassed = Math.min(Math.max(0, -trackRect.top), totalScroll);
                const progress = scrollPassed / totalScroll;
                timeline.style.transform = `translateX(-${progress * maxMove}px)`;
                progressLine.style.width = `${progress * 100}%`;
            }
            function updateTrackHeight() {
                const totalScrollable = Math.max(0, timeline.scrollWidth - stickyContainer.clientWidth);
                const desiredHeight = totalScrollable + window.innerHeight;
                track.style.height = `${desiredHeight}px`;
            }
            function initTimeline() {
                updateTrackHeight();
                handleScroll();
            }
            window.addEventListener('resize', () => { clearTimeout(window.__timelineResizeTimer); window.__timelineResizeTimer = setTimeout(initTimeline, 150); });
            window.addEventListener('scroll', handleScroll);
            initTimeline();
        }

        // --- Script do Popup de Vídeo ---
        const videoTriggers = document.querySelectorAll('.video-thumbnail-wrapper');
        const popup = document.getElementById('video-popup');
        const closeBtn = document.querySelector('.video-popup-close-button');
        const videoContainer = document.getElementById('video-popup-player-container');
        const body = document.body;

        if (!popup || videoTriggers.length === 0) {
            console.error("ERRO: O popup ou os cards de vídeo não foram encontrados no HTML.");
            // Não precisa de `return` aqui, pois o resto do script ainda pode ser útil.
        } else { // Adicionado um else para não executar se houver erro
            function getYouTubeId(url) {
                if (!url) return null;
                const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i;
                const match = url.match(regex);
                return (match && match[1]) ? match[1] : null;
            }

            const openPopup = (videoSource) => {
                const youtubeId = getYouTubeId(videoSource);
                let thumbnailUrl = '';

                if (youtubeId) {
                    thumbnailUrl = `https://img.youtube.com/vi/${youtubeId}/maxresdefault.jpg`;
                }

                videoContainer.innerHTML = `
                    <div class="video-placeholder" style="background-image: url('${thumbnailUrl}'); background-color: #000;">
                        <img class="popup-play-icon" src="assets/images/how-it-works/icon-play.svg" alt="Play Video">
                    </div>
                `;
                
                popup.classList.add('visible');
                body.classList.add('modal-open');

                const placeholder = videoContainer.querySelector('.video-placeholder');
                if (placeholder) {
                    placeholder.addEventListener('click', () => {
                        if (youtubeId) {
                            videoContainer.innerHTML = `<iframe src="https://www.youtube.com/embed/${youtubeId}?autoplay=1&rel=0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
                        } else {
                            videoContainer.innerHTML = `<video controls autoplay src="${videoSource}"></video>`;
                        }
                    }, { once: true });
                }
            };

            const closePopup = () => {
                popup.classList.remove('visible');
                body.classList.remove('modal-open');
                videoContainer.innerHTML = ''; 
            };

            videoTriggers.forEach(trigger => {
                trigger.addEventListener('click', (e) => {
                    e.preventDefault();
                    const videoUrl = trigger.dataset.videoSource;
                    if (videoUrl) {
                        openPopup(videoUrl);
                    } else {
                        console.warn("AVISO: Popup não abriu porque a URL do vídeo está vazia.");
                    }
                });
            });

            closeBtn.addEventListener('click', closePopup);
            popup.addEventListener('click', (e) => { if (e.target === popup) { closePopup(); } });
            document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && popup.classList.contains('visible')) { closePopup(); } });
        }


        // --- Script para o BOTÃO VOLTAR AO TOPO (AGORA DENTRO DO DOMContentLoaded) ---
        const backToTopButton = document.querySelector('.back-to-top-button');
        console.log('Botão Voltar ao Topo encontrado:', backToTopButton); // DEBUG: Confirma se o botão foi encontrado

        if (backToTopButton) {
            backToTopButton.addEventListener('click', (e) => {
                e.preventDefault();
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });

            let lastScrollTop = 0;

            window.addEventListener('scroll', () => {
                let currentScrollTop = window.scrollY || document.documentElement.scrollTop;
                // console.log('Scroll atual:', currentScrollTop, 'Altura da janela:', window.innerHeight); // DEBUG: Verifica valores de scroll
                
                if (currentScrollTop > window.innerHeight / 2) { // Condição ajustada para a metade da tela, mais fácil de testar
                    if (currentScrollTop < lastScrollTop) {
                        backToTopButton.classList.add('visible');
                    } else {
                        backToTopButton.classList.remove('visible');
                    }
                } else {
                    backToTopButton.classList.remove('visible');
                }
                
                lastScrollTop = currentScrollTop <= 0 ? 0 : currentScrollTop;
            });
        }
    });
</script>
</body>
</html>